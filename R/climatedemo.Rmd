```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(RCy3)
require(usedist)
devtools::load_all()
```

```{r}
getwd()
setwd("C:/Users/georg/projects/CyMapper")
old_data <- read.csv("data/very_old_climate_data.csv")
old_data <- na.omit(old_data[, c("DATE", "PRCP", "TMAX", "TMIN")]) # ignore all my problems

# "distance" measure via difference of max temps
temp_dist <- function(obs1, obs2) {
  return(abs(as.numeric(obs1[3]) - as.numeric(obs2[3])))
}

# "distance" measure via difference in time (days)
days_between <- function(obs1, obs2) {
  date1 = as.Date(toString(obs1[1]), format="%Y-%m-%d")
  date2 = as.Date(toString(obs2[1]), format="%Y-%m-%d")
  if (is.na(date1-date2)) {
    return(0)
  } else {
   return(max(date1-date2, date2-date1)) 
  }
}
days_dist = dist_make(as.matrix(old_data), days_between)
temp_dist = dist_make(as.matrix(old_data), temp_dist)

cycombomapper(as.matrix(old_data), temp_dist, as.matrix(days_dist), 10)
```

